<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>MySQL on StrideDot</title><link>https://stridedot.github.io/tags/mysql/</link><description>Recent content in MySQL on StrideDot</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><copyright>StrideDot</copyright><lastBuildDate>Wed, 19 Jun 2024 16:57:41 +0800</lastBuildDate><atom:link href="https://stridedot.github.io/tags/mysql/index.xml" rel="self" type="application/rss+xml"/><item><title>使用命令行连接到 MySQL</title><link>https://stridedot.github.io/p/mysql-connecting/</link><pubDate>Wed, 19 Jun 2024 16:57:41 +0800</pubDate><guid>https://stridedot.github.io/p/mysql-connecting/</guid><description>&lt;img src="https://stridedot.github.io/p/mysql-connecting/MySQL-Logo.wine.png" alt="Featured image of post 使用命令行连接到 MySQL" />&lt;hr>
&lt;h2 id="命令选项">命令选项&lt;/h2>
&lt;ul>
&lt;li>&lt;code>--host=[hostname], -h[hostname]&lt;/code>：指定 MySQL 服务器的主机名&lt;/li>
&lt;li>&lt;code>--user=[username], -u[username]&lt;/code>：指定 MySQL 服务器的用户名&lt;/li>
&lt;li>&lt;code>--password=[password], -p[password]&lt;/code>：指定 MySQL 服务器的密码&lt;/li>
&lt;li>&lt;code>--port=[port], -P[port]&lt;/code>：指定 MySQL 服务器的端口号&lt;/li>
&lt;li>&lt;code>--protocol=[TCP|SOCKET|PIPE|MEMORY]&lt;/code>：指定 MySQL 服务器的连接协议，&lt;code>localhost&lt;/code> 默认使用 &lt;code>unix&lt;/code> 套接字：
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mysql --host&lt;span class="o">=&lt;/span>localhost
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>如何要强制使用 TCP 连接，指定 &lt;code>--protocol=TCP&lt;/code>：
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mysql --host&lt;span class="o">=&lt;/span>localhost --protocol&lt;span class="o">=&lt;/span>TCP
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>下面是 &lt;code>--protocol&lt;/code> 选项值及适用平台：
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>选项&lt;/th>
&lt;th>传输协议&lt;/th>
&lt;th>适用平台&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>TCP&lt;/td>
&lt;td>到本地或远程服务器的 TCP/IP 传输&lt;/td>
&lt;td>所有平台&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>SOCKET&lt;/td>
&lt;td>Unix 套接字传输到本地服务器&lt;/td>
&lt;td>Unix 平台&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>PIPE&lt;/td>
&lt;td>命名管道传输到本地服务器&lt;/td>
&lt;td>Windows 平台&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>MEMORY&lt;/td>
&lt;td>共享内存到本地服务器&lt;/td>
&lt;td>Windows 平台&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;/li>
&lt;/ul>
&lt;hr>
&lt;h2 id="连接到-mysql-服务器">连接到 MySQL 服务器&lt;/h2>
&lt;h3 id="localhost">localhost&lt;/h3>
&lt;p>在不指定任何选项的情况下，调用 &lt;code>mysql&lt;/code> 命令：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mysql
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>上面的命令包含以下默认选项：&lt;/p>
&lt;ul>
&lt;li>使用默认的主机名 &lt;code>localhost&lt;/code>&lt;/li>
&lt;li>使用默认的用户名 &lt;code>root&lt;/code>&lt;/li>
&lt;li>未指定密码&lt;/li>
&lt;li>使用默认的端口号 &lt;code>3306&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>执行上面的命令后会返回：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ERROR &lt;span class="m">1045&lt;/span> &lt;span class="o">(&lt;/span>28000&lt;span class="o">)&lt;/span>: Access denied &lt;span class="k">for&lt;/span> user &lt;span class="s1">&amp;#39;root&amp;#39;&lt;/span>@&lt;span class="s1">&amp;#39;localhost&amp;#39;&lt;/span> &lt;span class="o">(&lt;/span>using password: NO&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>跟下面的命令等价：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mysql -h localhost -u root
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ERROR &lt;span class="m">1045&lt;/span> &lt;span class="o">(&lt;/span>28000&lt;span class="o">)&lt;/span>: Access denied &lt;span class="k">for&lt;/span> user &lt;span class="s1">&amp;#39;root&amp;#39;&lt;/span>@&lt;span class="s1">&amp;#39;localhost&amp;#39;&lt;/span> &lt;span class="o">(&lt;/span>using password: NO&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用完整的选项连接到 MySQL 服务器：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mysql --host&lt;span class="o">=&lt;/span>localhost --user&lt;span class="o">=&lt;/span>root --port&lt;span class="o">=&lt;/span>&lt;span class="m">3306&lt;/span> --password &lt;span class="m">123456&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>在 &lt;code>Unix&lt;/code> 上，MySQL 会对 &lt;code>localhost&lt;/code> 使用 &lt;code>Unix&lt;/code> 套接字连接，可使用 &lt;code>--socket&lt;/code> 选项指定套接字文件。&lt;/p>
&lt;h3 id="protocol">protocol&lt;/h3>
&lt;p>使用 &lt;code>--protocol&lt;/code> 选项指定连接协议，即使指定了 &lt;code>--host=localhost&lt;/code>，也会覆盖前面的规则。
示例：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sh-4.4# mysql -h localhost -u root --protocol&lt;span class="o">=&lt;/span>TCP -p
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Enter password:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Welcome to the MySQL monitor. Commands end with &lt;span class="p">;&lt;/span> or &lt;span class="se">\g&lt;/span>.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Your MySQL connection id is &lt;span class="m">40&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server version: 8.3.0 MySQL Community Server - GPL
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Copyright &lt;span class="o">(&lt;/span>c&lt;span class="o">)&lt;/span> 2000, 2024, Oracle and/or its affiliates.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Oracle is a registered trademark of Oracle Corporation and/or its
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">affiliates. Other names may be trademarks of their respective
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">owners.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Type &lt;span class="s1">&amp;#39;help;&amp;#39;&lt;/span> or &lt;span class="s1">&amp;#39;\h&amp;#39;&lt;/span> &lt;span class="k">for&lt;/span> help. Type &lt;span class="s1">&amp;#39;\c&amp;#39;&lt;/span> to clear the current input statement.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果未使用 &lt;code>--protocol&lt;/code> 选项，&lt;code>localhost&lt;/code> 默认使用 &lt;code>Unix&lt;/code> 套接字连接，即使使用 &lt;code>--port&lt;/code> 来指定端口号。
示例：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sh-4.4# mysql -h localhost -u root -P1111 -p
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Enter password:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Welcome to the MySQL monitor. Commands end with &lt;span class="p">;&lt;/span> or &lt;span class="se">\g&lt;/span>.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Your MySQL connection id is &lt;span class="m">41&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Server version: 8.3.0 MySQL Community Server - GPL
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Copyright &lt;span class="o">(&lt;/span>c&lt;span class="o">)&lt;/span> 2000, 2024, Oracle and/or its affiliates.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Oracle is a registered trademark of Oracle Corporation and/or its
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">affiliates. Other names may be trademarks of their respective
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">owners.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Type &lt;span class="s1">&amp;#39;help;&amp;#39;&lt;/span> or &lt;span class="s1">&amp;#39;\h&amp;#39;&lt;/span> &lt;span class="k">for&lt;/span> help. Type &lt;span class="s1">&amp;#39;\c&amp;#39;&lt;/span> to clear the current input statement.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql&amp;gt;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果要使用 &lt;code>TCP&lt;/code> 连接，有以下两种方式：&lt;/p>
&lt;ul>
&lt;li>使用 &lt;code>--host&lt;/code> 或 &lt;code>-h&lt;/code> 指定主机 IP 值 &lt;code>127.0.0.1&lt;/code>&lt;/li>
&lt;li>使用 &lt;code>--protocol=TCP&lt;/code> 指定连接协议&lt;/li>
&lt;/ul>
&lt;p>示例如下：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mysql --host&lt;span class="o">=&lt;/span>127.0.0.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql --protocol&lt;span class="o">=&lt;/span>TCP
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>指定端口号强制建立 &lt;code>TCP/IP&lt;/code> 连接，下面两种方式皆可：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mysql --host&lt;span class="o">=&lt;/span>127.0.0.1 --port&lt;span class="o">=&lt;/span>&lt;span class="m">13306&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">mysql --protocol&lt;span class="o">=&lt;/span>TCP --port&lt;span class="o">=&lt;/span>&lt;span class="m">13306&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item></channel></rss>